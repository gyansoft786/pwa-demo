import{a as V}from"./chunk-DO2FIABD.js";import{x as y}from"./chunk-LG33HJ7K.js";import"./chunk-K2WS7XYY.js";import{Cb as _,Eb as o,Mb as E,Nb as P,Pb as m,Sa as w,Tb as k,Va as p,cb as g,db as h,f as x,ia as v,jb as f,ob as b,ra as s,sa as d,sb as C,wb as c,xb as l,yb as r,zb as u}from"./chunk-AO5Y7OM7.js";var T=["videoEle"];function S(i,t){if(i&1){let e=u();r(0,"br"),c(1,"button",2),_("click",function(){s(e);let a=o(2);return d(a.takePermission())}),m(2,"Open Camera"),l(),r(3,"br")}}function D(i,t){if(i&1){let e=u();r(0,"br"),c(1,"button",2),_("click",function(){s(e);let a=o(2);return d(a.closeCamera())}),m(2,"Close Camera"),l(),c(3,"button",2),_("click",function(){s(e);let a=o(2);return d(a.takePicture())}),m(4,"Take Picture"),l(),r(5,"br")}}function U(i,t){if(i&1){let e=u();r(0,"img",3)(1,"br"),c(2,"button",4),_("click",function(){s(e);let a=o(2);return d(a.exportImage())}),m(3,"Export"),l()}if(i&2){let e=o(2);b("src",e.imageUrl(),w)}}function O(i,t){if(i&1&&(r(0,"video",1,0),f(2,S,4,0)(3,D,6,0)(4,U,4,1)),i&2){let e=o();p(2),C(e.stream?3:2),p(2),C(e.imageUrl()?4:-1)}}function A(i,t){i&1&&(c(0,"mat-card"),m(1,` Camera api not supported
`),l())}var M=class i{apiSupported=g(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia);imageUrl=g("");cameraView=h.required("videoEle");stream;takePermission(){return x(this,null,function*(){try{this.stream=yield navigator.mediaDevices.getUserMedia({video:!0}),this.cameraView().nativeElement.srcObject=this.stream,yield this.cameraView().nativeElement.play()}catch{}})}takePicture(){let t=document.createElement("canvas");t.getContext("2d")?.drawImage(this.cameraView().nativeElement,0,0,t.width,t.height),this.imageUrl.set(t.toDataURL("image/png"))}closeCamera(){this.stream&&(this.stream.getTracks().forEach(t=>t.stop()),this.stream=null)}ngOnDestroy(){this.closeCamera()}exportImage(){if(!this.imageUrl())return;let t=document.createElement("a");t.href=this.imageUrl(),t.setAttribute("download","download"),t.click()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=v({type:i,selectors:[["app-camera"]],viewQuery:function(e,n){e&1&&E(n.cameraView,T,5),e&2&&P()},standalone:!0,features:[k],decls:2,vars:1,consts:[["videoEle",""],["autoplay","",1,"video-ement"],["mat-flat-button","",3,"click"],[1,"img-prev",3,"src"],["type","button","mat-flat-button","",3,"click"]],template:function(e,n){e&1&&f(0,O,5,2)(1,A,2,0,"mat-card"),e&2&&C(n.apiSupported()?0:1)},dependencies:[y,V],styles:[".img-prev[_ngcontent-%COMP%], .video-ement[_ngcontent-%COMP%]{width:300px}"]})};export{M as CameraPage};
